import numpy as np
import math, csv
import matplotlib.pyplot as plt
# import matplotlib.axes as ax
from scipy.interpolate import interp1d
import pandas as pd

big_arr = [["10000", "0.2", "0.4", "0.367800"],
["10000", "0.4", "0.4", "0.396100"],
["10000", "0.6", "0.4", "0.445100"],
["10000", "0.8", "0.4", "0.445500"],
["20000", "0.2", "0.4", "0.437200"],
["20000", "0.4", "0.4", "0.493300"],
["20000", "0.6", "0.4", "0.461250"],
["20000", "0.8", "0.4", "0.466400"],
["30000", "0.2", "0.4", "0.449733"],
["30000", "0.4", "0.4", "0.448500"],
["30000", "0.6", "0.4", "0.454967"],
["30000", "0.8", "0.4", "0.521467"],
["40000", "0.2", "0.4", "0.434725"],
["40000", "0.4", "0.4", "0.475800"],
["40000", "0.6", "0.4", "0.513325"],
["40000", "0.8", "0.4", "0.504100"],
["50000", "0.2", "0.4", "0.468700"],
["50000", "0.4", "0.4", "0.464880"],
["50000", "0.6", "0.4", "0.519280"],
["50000", "0.8", "0.4", "0.491240"],
["60000", "0.2", "0.4", "0.462083"],
["60000", "0.4", "0.4", "0.536217"],
["60000", "0.6", "0.4", "0.542433"],
["60000", "0.8", "0.4", "0.469850"],
["70000", "0.2", "0.4", "0.453657"],
["70000", "0.4", "0.4", "0.490200"],
["70000", "0.6", "0.4", "0.515500"],
["70000", "0.8", "0.4", "0.520829"],
["80000", "0.2", "0.4", "0.464375"],
["80000", "0.4", "0.4", "0.490150"],
["80000", "0.6", "0.4", "0.462750"],
["80000", "0.8", "0.4", "0.518450"],
["90000", "0.2", "0.4", "0.478289"],
["90000", "0.4", "0.4", "0.510889"],
["90000", "0.6", "0.4", "0.487644"],
["90000", "0.8", "0.4", "0.489711"],
["100000", "0.2", "0.4", "0.460730"],
["100000", "0.4", "0.4", "0.496920"],
["100000", "0.6", "0.4", "0.510730"],
["100000", "0.8", "0.4", "0.500290"]]

for gamma in range(1, 5):
    if gamma != 2:
        continue
    gmm = str(round(0.2*gamma, 2))
    arr = [el for el in big_arr if el[2] == gmm]
    x_axis=[10000, 20000, 30000, 40000, 50000, 60000, 70000, 80000, 90000, 100000]

    df1 = pd.DataFrame()
    df1['Alpha = 0.2'] = [elem[3] for elem in arr if elem[1] == "0.2"]
    df1['Alpha = 0.4'] = [elem[3] for elem in arr if elem[1] == "0.4"]
    df1['Alpha = 0.6'] = [elem[3] for elem in arr if elem[1] == "0.6"]
    df1['Alpha = 0.8'] = [elem[3] for elem in arr if elem[1] == "0.8"]
    df1.index = x_axis

    f1 = interp1d(df1.index, df1['Alpha = 0.2'],kind='cubic')
    f2 = interp1d(df1.index, df1['Alpha = 0.4'],kind='cubic')
    f3 = interp1d(df1.index, df1['Alpha = 0.6'],kind='cubic')
    f4 = interp1d(df1.index, df1['Alpha = 0.8'],kind='cubic')

    df2 = pd.DataFrame()
    new_index = np.arange(10000,110000, 10000)
    df2['Alpha = 0.2'] = f1(new_index)
    df2['Alpha = 0.4'] = f2(new_index)
    df2['Alpha = 0.6'] = f3(new_index)
    df2['Alpha = 0.8'] = f4(new_index)
    df2.index = new_index

    ax2 = df2.plot.line(marker='.')
    ax2.set_title('Gamma = {}'.format(gmm))
    ax2.set_xlabel("Number of games")
    ax2.set_ylabel("Win share")
    # plt.show()
    plt.savefig('p4_gamma_p{}.png'.format(int(gamma*2)))
